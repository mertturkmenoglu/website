---
import Layout from '../../layouts/Layout.astro'
const allPosts = await Astro.glob('./*.{md,mdx}')
const publishedPosts = allPosts.filter((post) => post.frontmatter.publish)
const posts = publishedPosts.reverse();
---
<Layout title="Blog | Mert Turkmenoglu">
  <a href="/" class="hover:underline text-xs">&lt;- Home</a>
  <h2 class="text-5xl text-white mt-8">My Blog Posts</h2>
  <hr class="border border-white w-11/12 sm:w-2/3 md:w-1/3 mt-2 px-4" />
  <ul class="mt-8 flex flex-col gap-8">
    {posts.map((post) => 
      <li>
        <a href={post.url} class="flex items-stretch gap-4 bg-midnight hover:bg-midnight/10">
          <img 
            src={`/${post.frontmatter.image}`} 
            alt={post.frontmatter.imageAlt}
            class="w-32 aspect-square object-cover rounded"
          />
          <div>
            <h3 class="text-white text-2xl">{post.frontmatter.title}</h3>
            <p class="text-gray-200 text-sm mt-2 line-clamp-2">{post.frontmatter.description}</p>
            <div class="flex items-center mt-2">
              <span class="text-gray-400 text-xs">{post.frontmatter.date}</span>
            </div>
          </div>
        </a> 
      </li>
    )}
  </ul>
</Layout>